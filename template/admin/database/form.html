<div id="toolbar">
    <table class="form">
        <tr>
            <td align="right">
                <input name="keyword" class="easyui-textbox" data-options="buttonText:' 搜索 ',prompt:'请输入关键词...',buttonIcon:'icon-search',onClickButton: onSearch" style="width:250px;">
            </td>
        </tr>
    </table>
</div>
<table id="grid">
    <thead>
    <tr>
        {volist name="fields" id="field"}
        <th data-options="field:'{$field}',width:100,sortable:true">{$field}</th>
        {/volist}
    </tr>
    </thead>
</table>
<div id="leftMenu" class="easyui-menu" data-options="onClick:onMenu">
    <div data-options="name:'delete', iconCls:'icon-no'">{$Think.lang.delete}</div>
    <div data-options="name:'reload',iconCls:'icon-save'">{$Think.lang.reload}{$Think.lang.list}</div>
    <!--<div data-options="name:'add',iconCls:'fa fa-plus'">{$Think.lang.add}{$Think.lang.child}文件</div>-->
</div>
<script type="text/javascript">
    var grid = $('#grid');
    var path = null;
    var rowId = 0;
    $(function(){
        easyui.datagrid({
            element:grid,
            idField:'id',
            fitColumns:false,
            onContextMenu: function(e, row){
                e.preventDefault();
                try {
                    $('#leftMenu').menu('show', {
                        left:e.pageX,
                        top:e.pageY
                    });
                }catch(e){}

            }

        });
    });



    function onMenu(item) {
        switch (item.name) {
            case 'reload':
                grid.datagrid('reload');
                break;
            case 'delete':
                var node = grid.datagrid('getSelected');
                if(node.id) {
                    easyui.doAjax('{:url("delete")}', {id: node.id}, function(){
                        grid.datagrid('reload');
                    });
                }
                break;
//            case 'add':
//                onOpen();
//                break;
        }

    }

    function onSearch() {
        var query = $('#toolbar').form('getData');
        grid.datagrid({
            queryParams: query
        });
    }
</script>